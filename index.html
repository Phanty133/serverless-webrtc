<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<style>
		body {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
		}

		iframe {
			border: solid;
		}
	</style>
</head>
<body>
	<iframe src="http://localhost:5500/peer.html?id=0" id="iframe0"></iframe>
	<iframe src="http://localhost:5500/peer.html?id=1" id="iframe1"></iframe>
	<iframe src="http://localhost:5500/peer.html?id=2" id="iframe2"></iframe>

	<script src="./msgHandler.js"></script>
	<script>
		const iframe0 = document.getElementById("iframe0");
		const iframe1 = document.getElementById("iframe1");
		// const iframe2 = document.getElementById("iframe2");

		setTimeout(() => {
			const con1 = { // connect 0 to 1
				source: "-1",
				data: "1",
				label: "connect",
				target: "0",
			};

			const con2 = { // connect 0 to 2
				source: "-1",
				data: "2",
				label: "connect",
				target: "0",
			};

			const con3 = { // connect 1 to 2
				source: "-1",
				data: "2",
				label: "connect",
				target: "1",
			};
			
			iframe0.contentWindow.postMessage(JSON.stringify(con1), "*");
			iframe0.contentWindow.postMessage(JSON.stringify(con2), "*");
			// iframe1.contentWindow.postMessage(JSON.stringify(con3), "*");

			// setTimeout(() => {
			// 	iframe2.contentWindow.postMessage("send", "*");
			// }, 500);
		}, 500);
	</script>
</body>
</html>